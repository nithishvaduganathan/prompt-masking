<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacy-Preserving AI Chatbot</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Header -->
    <nav class="navbar navbar-dark bg-primary shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-shield-alt me-2"></i>
                Privacy-Preserving AI Chatbot
            </a>
            <span class="badge bg-success">
                <i class="fas fa-lock me-1"></i>
                Secure
            </span>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container mt-4 mb-5">
        <!-- Info Card -->
        <div class="card mb-4 border-info">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="fas fa-info-circle text-info me-2"></i>
                    How It Works
                </h5>
                <p class="card-text mb-0">
                    This chatbot uses <strong>local proxy-prompt masking</strong> to protect your sensitive information. 
                    Your personal data (mental health conditions, diseases, phone numbers, emails, names, age, gender, locations) 
                    is automatically detected and masked before being sent to any external AI service. 
                    The response is then unmasked locally to provide you with a natural answer while keeping your data private.
                </p>
            </div>
        </div>

        <!-- Main Chat Interface -->
        <div class="row">
            <!-- Chat Column -->
            <div class="col-lg-8">
                <div class="card chat-card shadow-sm">
                    <div class="card-header bg-gradient text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-comments me-2"></i>
                            Chat Interface
                        </h5>
                    </div>
                    <div class="card-body p-0">
                        <!-- Chat Messages -->
                        <div id="chatMessages" class="chat-messages p-3">
                            <!-- Welcome message -->
                            <div class="message bot-message">
                                <div class="message-avatar">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="message-content">
                                    <div class="message-text">
                                        <p>Hello! I'm your privacy-preserving AI assistant. You can ask me anything, and I'll protect your sensitive information automatically. Try asking me something personal!</p>
                                    </div>
                                    <div class="message-time">Just now</div>
                                </div>
                            </div>
                        </div>

                        <!-- Loading Indicator -->
                        <div id="loadingIndicator" class="text-center p-3" style="display: none;">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Processing...</span>
                            </div>
                            <p class="mt-2 mb-0 text-muted">Processing your message securely...</p>
                        </div>

                        <!-- Input Area -->
                        <div class="chat-input-area p-3 bg-light border-top">
                            <form id="chatForm">
                                <div class="input-group">
                                    <input 
                                        type="text" 
                                        id="userInput" 
                                        class="form-control" 
                                        placeholder="Type your message here... (e.g., 'I'm feeling anxious and my email is test@example.com')"
                                        required
                                        autocomplete="off">
                                    <button class="btn btn-primary" type="submit" id="sendBtn">
                                        <i class="fas fa-paper-plane me-2"></i>
                                        Send
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Privacy Details Column -->
            <div class="col-lg-4 mt-4 mt-lg-0">
                <div class="card shadow-sm">
                    <div class="card-header bg-success text-white">
                        <h6 class="mb-0">
                            <i class="fas fa-user-shield me-2"></i>
                            Privacy Protection Details
                        </h6>
                    </div>
                    <div class="card-body">
                        <div id="privacyDetails">
                            <p class="text-muted">Send a message to see how your data is protected!</p>
                        </div>
                    </div>
                </div>

                <!-- Example Queries -->
                <div class="card shadow-sm mt-3">
                    <div class="card-header bg-info text-white">
                        <h6 class="mb-0">
                            <i class="fas fa-lightbulb me-2"></i>
                            Try These Examples
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-primary btn-sm example-btn" data-example="I'm 25 years old and dealing with anxiety. Can you help?">
                                Mental Health Query
                            </button>
                            <button class="btn btn-outline-primary btn-sm example-btn" data-example="My email is john.doe@example.com and I live in New York. I have diabetes.">
                                Health with Contact Info
                            </button>
                            <button class="btn btn-outline-primary btn-sm example-btn" data-example="I'm a 30-year-old female with depression. My phone is 555-123-4567.">
                                Multiple Sensitive Items
                            </button>
                            <button class="btn btn-outline-primary btn-sm example-btn" data-example="Can you recommend a therapist in San Francisco for my PTSD?">
                                Location-based Query
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Protected Data Types -->
                <div class="card shadow-sm mt-3">
                    <div class="card-header bg-warning text-dark">
                        <h6 class="mb-0">
                            <i class="fas fa-shield-alt me-2"></i>
                            Protected Data Types
                        </h6>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled mb-0">
                            <li><i class="fas fa-check text-success me-2"></i> Mental Health Conditions</li>
                            <li><i class="fas fa-check text-success me-2"></i> Medical Conditions</li>
                            <li><i class="fas fa-check text-success me-2"></i> Email Addresses</li>
                            <li><i class="fas fa-check text-success me-2"></i> Phone Numbers</li>
                            <li><i class="fas fa-check text-success me-2"></i> Names (with spaCy)</li>
                            <li><i class="fas fa-check text-success me-2"></i> Age Information</li>
                            <li><i class="fas fa-check text-success me-2"></i> Gender Information</li>
                            <li><i class="fas fa-check text-success me-2"></i> Locations</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer mt-5 py-3 bg-light border-top">
        <div class="container text-center">
            <p class="text-muted mb-0">
                <i class="fas fa-graduation-cap me-2"></i>
                Privacy-Preserving AI Chatbot | Academic Research Project
            </p>
            <small class="text-muted">
                Built with Flask, Bootstrap & Advanced NLP Masking Techniques
            </small>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
</body>
</html>
